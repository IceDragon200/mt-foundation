local Luna = assert(foundation.com.Luna)
local m = assert(foundation.com.Color)

local case = Luna:new("foundation.com.Color")

case:describe("new/4", function (t2)
  t2:test("create a new color table", function (t3)
    t3:assert_table_eq(m.new(0, 0, 0, 255), { r = 0, g = 0, b = 0, a = 255 })
    t3:assert_table_eq(m.new(255, 255, 255, 255), { r = 255, g = 255, b = 255, a = 255 })
    t3:assert_table_eq(m.new(0, 96, 127, 255), { r = 0, g = 96, b = 127, a = 255 })
  end)
end)

case:describe("add/2", function (t2)
  t2:test("can add 2 colors together", function (t3)
    local a = m.new(44, 65, 23, 255)
    local b = m.new(77, 80, 90, 255)
    t3:assert_table_eq(m.add(a, b), m.new(121, 145, 113, 255))
  end)
end)

case:describe("to_string32/1", function (t2)
  t2:test("can convert a color into a ColorString (#RRGGBBAA)", function (t3)
    t3:assert_eq(m.to_string32(m.new(0, 0, 0, 255)), "#000000FF")
    t3:assert_eq(m.to_string32(m.new(15, 31, 127, 255)), "#0F1F7FFF")
    t3:assert_eq(m.to_string32(m.new(255, 255, 255, 255)), "#FFFFFFFF")
  end)
end)

case:describe("to_string24/1", function (t2)
  t2:test("can convert a color into a ColorString (#RRGGBB)", function (t3)
    t3:assert_eq(m.to_string24(m.new(0, 0, 0, 255)), "#000000")
    t3:assert_eq(m.to_string24(m.new(15, 31, 127, 255)), "#0F1F7F")
    t3:assert_eq(m.to_string24(m.new(255, 255, 255, 255)), "#FFFFFF")
  end)
end)

case:describe("to_string16/1", function (t2)
  t2:test("can convert a color into a ColorString (#RGBA)", function (t3)
    t3:assert_eq(m.to_string16(m.new(0, 0, 0, 255)), "#000F")
    t3:assert_eq(m.to_string16(m.new(16, 32, 128, 255)), "#128F")
    t3:assert_eq(m.to_string16(m.new(255, 255, 255, 255)), "#FFFF")
  end)
end)

case:describe("to_string12/1", function (t2)
  t2:test("can convert a color into a ColorString (#RGB)", function (t3)
    t3:assert_eq(m.to_string12(m.new(0, 0, 0, 255)), "#000")
    t3:assert_eq(m.to_string12(m.new(16, 32, 128, 255)), "#128")
    t3:assert_eq(m.to_string12(m.new(255, 255, 255, 255)), "#FFF")
  end)
end)

case:execute()
case:display_stats()
case:maybe_error()
